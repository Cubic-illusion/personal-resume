<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Hub - Retro Desktop</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'MS Sans Serif', Arial, sans-serif;
            background: #008080;
            height: 100vh;
            overflow: hidden;
        }

        .crt-effect {
            background-color: #008080;
            overflow: hidden;
        }
        .crt-effect .desktop {
            animation: screen-shake 8s infinite;
        }
        @keyframes screen-shake {
            0%, 2%, 100% { transform: translate(0, 0); }
            0.5% { transform: translate(-2px, 1px); }
            1%   { transform: translate(3px, 2px); }
            1.5% { transform: translate(1px, -2px); }
        }
        .crt-effect::before {
            content: " ";
            display: block;
            position: fixed;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(to bottom, rgba(20,20,20,0) 50%, rgba(0,0,0,0.4) 50%);
            background-size: 100% 4px;
            z-index: 10001;
            pointer-events: none;
            animation: scanline-roll 8s infinite linear;
        }
        @keyframes scanline-roll {
            from { background-position-y: 0px; }
            to { background-position-y: -200px; }
        }
        .crt-effect::after {
            content: " ";
            display: block;
            position: fixed;
            top: 0; left: 0; bottom: 0; right: 0;
            background:
                radial-gradient(circle at center, rgba(0,0,0,0) 30%, rgba(0,0,0,0.4) 90%),
                radial-gradient(ellipse at center, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 40%);
            z-index: 10000;
            pointer-events: none;
        }
        .crt-noise {
            position: fixed;
            top: -50%; left: -50%;
            width: 200%; height: 200%;
            z-index: 9999;
            pointer-events: none;
            background: transparent url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIj48ZmlsdGVyIGlkPSJiZlRleHR1cmUiIHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxmZVR1cmJ1bGVuY2UgdHlwZT0iZnJhY3RhbE5vaXNlIiBiYXNlRnJlcXVlbmN5PSIwLjgiIG51bU9jdGF2ZXM9IjEiIHN0aXRjaFRpbGVzPSJzdGl0Y2giLz48L2ZpbHRlcj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgZmlsdGVyPSJ1cmwoI2JmVGV4dHVyZSkiLz48L3N2Zz4=') repeat;
            animation: static-flicker 1s infinite steps(2);
        }
        @keyframes static-flicker {
            0% { opacity: 0.05; } 20% { opacity: 0.1; } 40% { opacity: 0.08; }
            60% { opacity: 0.15; } 80% { opacity: 0.06; } 100% { opacity: 0.12; }
        }
        
        .desktop {
            height: 100vh;
            padding: 0; 
            position: relative;
        }
        .icon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, 90px);
            grid-auto-rows: 90px;
            gap: 20px;
            padding: 10px;
        }
        .desktop-icon {
            width: 80px;
            text-align: center;
            cursor: pointer;
            user-select: none;
            padding: 5px;
        }
        .desktop-icon:hover {
            background: rgba(0, 0, 128, 0.3);
            outline: 1px dotted white;
        }
        .desktop-icon.selected {
            background: rgba(0, 0, 128, 0.5);
            outline: 1px dotted white;
        }
        .icon-image {
            width: 48px;
            height: 48px;
            margin: 0 auto 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-family: sans-serif;
        }
        .icon-image img {
            width: 48px;
            height: 48px;
            object-fit: contain;
        }
        .icon-label {
            color: white;
            font-size: 11px;
            text-shadow: 1px 1px 2px black;
            word-wrap: break-word;
            font-family: 'Press Start 2P', cursive;
        }
        .taskbar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 40px;
            background: #c0c0c0;
            border-top: 2px solid #ffffff;
            display: flex;
            align-items: center;
            padding: 2px;
            z-index: 5000;
            box-shadow: inset 0 1px 0 #dfdfdf;
        }
        .start-button {
            height: 32px;
            padding: 0 20px;
            background: #c0c0c0;
            border: 2px outset #dfdfdf;
            font-weight: bold;
            font-size: 13px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .start-button:active { border-style: inset; }
        .start-logo {
            width: 20px;
            height: 20px;
            background: linear-gradient(45deg, #ff0000, #ffff00, #00ff00, #0000ff);
            border-radius: 2px;
        }
        .taskbar-divider {
            width: 2px;
            height: 32px;
            background: #808080;
            margin: 0 5px;
            box-shadow: 1px 0 0 #ffffff;
        }
        .taskbar-clock {
            margin-left: auto;
            padding: 0 10px;
            height: 32px;
            border: 2px inset #dfdfdf;
            display: flex;
            align-items: center;
            font-size: 11px;
        }
        
        .window {
            position: absolute;
            background: #c0c0c0;
            border: 2px outset #dfdfdf;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.5);
            display: none;
            z-index: 100;
            min-width: 350px;
            min-height: 250px;
        }
        .window.active {
            display: block;
            z-index: 200;
        }
        .window-titlebar {
            background: linear-gradient(to right, #000080, #1084d0);
            color: white;
            padding: 3px 5px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: move;
            font-size: 12px;
            font-weight: bold;
        }
        .window-controls { display: flex; }
        .window-button {
            width: 18px;
            height: 18px;
            background: #c0c0c0;
            border: 1px outset #dfdfdf;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            font-family: sans-serif;
        }
        .window-button:active { border-style: inset; }
        .window-content {
            height: calc(100% - 28px);
            border: 2px inset #dfdfdf;
            margin: 2px;
            background: white;
            color: #000;
        }
        .window-content.animation-mode {
            display: flex;
            justify-content: center;
            align-items: center;
            background: #000;
            padding: 0;
        }

        .resize-handle-container {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
        }
        .resize-handle {
            position: absolute;
            pointer-events: auto;
        }
        .resize-handle.top    { top: -5px; left: 5px; right: 5px; height: 10px; cursor: n-resize; }
        .resize-handle.right  { top: 5px; right: -5px; bottom: 5px; width: 10px; cursor: e-resize; }
        .resize-handle.bottom { bottom: -5px; left: 5px; right: 5px; height: 10px; cursor: s-resize; }
        .resize-handle.left   { top: 5px; left: -5px; bottom: 5px; width: 10px; cursor: w-resize; }
        .resize-handle.top-left     { top: -5px; left: -5px; width: 10px; height: 10px; cursor: nw-resize; }
        .resize-handle.top-right    { top: -5px; right: -5px; width: 10px; height: 10px; cursor: ne-resize; }
        .resize-handle.bottom-left  { bottom: -5px; left: -5px; width: 10px; height: 10px; cursor: sw-resize; }
        .resize-handle.bottom-right { bottom: -5px; right: -5px; width: 10px; height: 10px; cursor: se-resize; }
        #window1 { width: 520px; height: 480px; top: 5%; left: 10%; }
        #window2 { width: 560px; height: 480px; top: 15%; left: 15%; }
        #window3 { width: 640px; height: 480px; top: 10%; left: 25%; }
        #window4 { width: 720px; height: 480px; top: 20%; left: 20%; }
        #window5 { width: 600px; height: 480px; top: 12%; left: 30%; }
        #window6 { width: 680px; height: 480px; top: 22%; left: 18%; }
        #window7 { width: 750px; height: 550px; top: 8%; left: 15%; }

        .gtm-animation-container {
            width: 300px;
            height: 150px;
        }
        .gtm-animation-container svg {
            width: 100%;
            height: 100%;
        }
        .gtm-animation-container text {
            font-family: 'Press Start 2P', cursive;
            font-size: 80px;
            fill: #7F56D9;
            text-anchor: middle;
        }
        #wordle-container {
            border: 2px outset #fff;
            padding: 10px;
            background: #c0c0c0;
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }
        .tile { width: 60px; height: 60px; perspective: 1000px; }
        .tile-content { position: relative; width: 100%; height: 100%; transform-style: preserve-3d; transition: transform 0.4s; }
        .tile.flipped .tile-content { transform: rotateX(180deg); }
        .tile .front, .tile .back {
            position: absolute; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            font-size: 2rem; font-family: 'Press Start 2P', cursive;
            color: white; backface-visibility: hidden; box-sizing: border-box;
            border: 2px outset #fff;
        }
        .tile .front { background-color: #808080; }
        .tile .back { background-color: #808080; transform: rotateX(180deg); }
        .back.yellow { background-color: #FFFF00; border-color: #fff; color: #000; }
        .back.green { background-color: #008000; border-color: #fff; }

        #model-container {
            width: 100%;
            height: 100%;
        }
        #model-container canvas {
            display: block;
            image-rendering: pixelated;
        }
        
        .cursor {
            display: inline-block; width: 1ch; height: 1.5rem;
            background-color: #00FF00; animation: blink 1s step-end infinite;
        }
        @keyframes blink { 50% { opacity: 0; } }

        .canyon-road {
            width: 100%;
            height: 100%;
            background: linear-gradient(#4a4a4a, #6b6b6b);
            position: relative;
            overflow: hidden;
            border: 10px solid #a58a58;
            box-sizing: border-box;
        }
        .road-line {
            width: 15px;
            height: 80px;
            background: #ffc857;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            animation: scroll-road 0.3s linear infinite;
        }
        .car-sprite {
            width: 80px;
            height: 150px;
            background-color: #c00;
            border: 2px outset #fff;
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            animation: drive-car 4s ease-in-out forwards;
        }
        @keyframes scroll-road {
            from { top: -80px; }
            to { top: 100%; }
        }
        @keyframes drive-car {
            0%   { transform: translateX(-50%) translateY(0); }
            20%  { transform: translateX(-150%) translateY(-50px) rotate(-10deg); }
            40%  { transform: translateX(50%) translateY(-100px) rotate(10deg); }
            60%  { transform: translateX(-100%) translateY(-200px) rotate(-5deg); }
            100% { transform: translateX(-50%) translateY(-600px); }
        }

        .github-blueprint-container {
            width: 100%;
            height: 100%;
        }
        .github-blueprint-container svg {
            width: 90%;
            height: 90%;
        }
        .grid-background {
            fill: url(#grid);
            opacity: 0;
        }
        .octocat-path {
            stroke-width: 4;
            stroke-linecap: round;
            stroke-linejoin: round;
            fill: none;
        }
        .crt-effect::before,
        .crt-effect::after,
        .crt-noise {
            bottom: 0px;
        }

    </style>
</head>
<body class="crt-effect">
    
    <div class="crt-noise"></div>
    
    <div id="desktop-ui">
        <div class="desktop">
            <div class="icon-grid">
                <div class="desktop-icon" data-window="window1">
                    <div class="icon-image">‚úÖ</div>
                    <div class="icon-label">Tasks List</div>
                </div>
                
                <div class="desktop-icon" data-window="window2">
                    <div class="icon-image">üß†</div>
                    <div class="icon-label">AI Wordle</div>
                </div>
                
                <div class="desktop-icon" data-window="window3">
                    <div class="icon-image">üåô</div>
                    <div class="icon-label">Cresc Moon</div>
                </div>
                
                <div class="desktop-icon" data-window="window4">
                    <div class="icon-image">‚öîÔ∏è</div>
                    <div class="icon-label">Adv Game</div>
                </div>

                <div class="desktop-icon" data-window="window5">
                    <div class="icon-image">
                        <img src="canyon-drive-icon.png" alt="Canyon Drive">
                    </div>
                    <div class="icon-label">Canyon Drive</div>
                </div>

                <div class="desktop-icon" data-window="window6">
                    <div class="icon-image">üêô</div>
                    <div class="icon-label">GitHub</div>
                </div>

            </div>

            <div class="window" id="window1" data-animation="gtm" data-url="https://gtm-three-liard.vercel.app">
                <div class="window-titlebar"><span>Tasks List</span><div class="window-controls"><div class="window-button close">√ó</div></div></div>
                <div class="window-content"></div>
                <div class="resize-handle-container">
                    <div class="resize-handle top"></div><div class="resize-handle right"></div><div class="resize-handle bottom"></div><div class="resize-handle left"></div>
                    <div class="resize-handle top-left"></div><div class="resize-handle top-right"></div><div class="resize-handle bottom-left"></div><div class="resize-handle bottom-right"></div>
                </div>
            </div>

            <div class="window" id="window2" data-animation="wordle" data-url="https://cubic-illusion.github.io/ai-wordle">
                <div class="window-titlebar"><span>AI Wordle</span><div class="window-controls"><div class="window-button close">√ó</div></div></div>
                <div class="window-content"></div>
                <div class="resize-handle-container">
                    <div class="resize-handle top"></div><div class="resize-handle right"></div><div class="resize-handle bottom"></div><div class="resize-handle left"></div>
                    <div class="resize-handle top-left"></div><div class="resize-handle top-right"></div><div class="resize-handle bottom-left"></div><div class="resize-handle bottom-right"></div>
                </div>
            </div>

            <div class="window" id="window3" data-animation="moon" data-url="https://cubic-illusion.github.io/cresant-moon">
                <div class="window-titlebar"><span>Crescent Moon</span><div class="window-controls"><div class="window-button close">√ó</div></div></div>
                <div class="window-content"></div>
                <div class="resize-handle-container">
                    <div class="resize-handle top"></div><div class="resize-handle right"></div><div class="resize-handle bottom"></div><div class="resize-handle left"></div>
                    <div class="resize-handle top-left"></div><div class="resize-handle top-right"></div><div class="resize-handle bottom-left"></div><div class="resize-handle bottom-right"></div>
                </div>
            </div>

            <div class="window" id="window4" data-animation="game" data-url="https://cubic-illusion.github.io/simple-click-to-play-game">
                <div class="window-titlebar"><span>Adventure Game</span><div class="window-controls"><div class="window-button close">√ó</div></div></div>
                <div class="window-content"></div>
                <div class="resize-handle-container">
                    <div class="resize-handle top"></div><div class="resize-handle right"></div><div class="resize-handle bottom"></div><div class="resize-handle left"></div>
                    <div class="resize-handle top-left"></div><div class="resize-handle top-right"></div><div class="resize-handle bottom-left"></div><div class="resize-handle bottom-right"></div>
                </div>
            </div>

            <div class="window" id="window5" data-animation="canyon" data-url="https://cubic-illusion.itch.io/canyon-drive">
                <div class="window-titlebar"><span>Canyon Drive (Itch.io)</span><div class="window-controls"><div class="window-button close">√ó</div></div></div>
                <div class="window-content"></div>
                <div class="resize-handle-container">
                    <div class="resize-handle top"></div><div class="resize-handle right"></div><div class="resize-handle bottom"></div><div class="resize-handle left"></div>
                    <div class="resize-handle top-left"></div><div class="resize-handle top-right"></div><div class="resize-handle bottom-left"></div><div class="resize-handle bottom-right"></div>
                </div>
            </div>

            <div class="window" id="window6" data-animation="github" data-url="https://github.com/Cubic-illusion">
                <div class="window-titlebar"><span>GitHub Profile</span><div class="window-controls"><div class="window-button close">√ó</div></div></div>
                <div class="window-content"></div>
                <div class="resize-handle-container">
                    <div class="resize-handle top"></div><div class="resize-handle right"></div><div class="resize-handle bottom"></div><div class="resize-handle left"></div>
                    <div class="resize-handle top-left"></div><div class="resize-handle top-right"></div><div class="resize-handle bottom-left"></div><div class="resize-handle bottom-right"></div>
                </div>
            </div>

        </div>

        <div class="taskbar">
            <button class="start-button"><div class="start-logo"></div><span>Start</span></button>
            <div class="taskbar-divider"></div>
            <div class="taskbar-clock" id="clock">12:00 PM</div>
        </div>
    </div>
    
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
    { "imports": {
        "three": "https://unpkg.com/three@0.157.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.157.0/examples/jsm/"
    }}
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
        import { DRACOLoader } from 'three/addons/loaders/DRACOLoader.js';
        function runAnimationInWindow(windowEl, animationType, url) {
            const contentArea = windowEl.querySelector('.window-content');
            if (!contentArea) return;

            contentArea.innerHTML = '';
            contentArea.classList.add('animation-mode');

            switch (animationType) {
                case 'gtm': animateGTM(contentArea, url); break;
                case 'wordle': animateWordle(contentArea, url); break;
                case 'moon': animate3DModel(contentArea, url); break;
                case 'game': animateTerminal(contentArea, url); break;
                case 'canyon': animateCanyonDrive(contentArea, url); break;
                case 'github': animateGitHub(contentArea, url); break;
            }
        }
        
        function animateGTM(container, url) {
            const svgContainer = document.createElement('div');
            svgContainer.className = 'gtm-animation-container';
            svgContainer.innerHTML = `<svg viewBox="0 0 300 150"><text id="g-letter" x="50" y="100" opacity="0">G</text><text id="t-letter" x="150" y="100" opacity="0">T</text><text id="m-letter" x="250" y="100" opacity="0">M</text></svg>`;
            container.appendChild(svgContainer);
            const textScramble = { g: '', t: '', m: '' };
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890@#$%&';
            const tl = anime.timeline({ duration: 3800, complete: () => window.location.href = url });
            tl.add({ targets: 'text', opacity: 1, translateY: [20, 0], duration: 500, delay: anime.stagger(150), easing: 'easeOutQuad' })
            .add({ targets: textScramble, g: 'G', t: 'T', m: 'M', duration: 1500, easing: 'linear', update: function () {
                const gEl = document.getElementById('g-letter');
                const tEl = document.getElementById('t-letter');
                const mEl = document.getElementById('m-letter');
                if (gEl) gEl.textContent = textScramble.g ? 'G' : chars.charAt(Math.floor(Math.random() * chars.length));
                if (tEl) tEl.textContent = textScramble.t ? 'T' : chars.charAt(Math.floor(Math.random() * chars.length));
                if (mEl) mEl.textContent = textScramble.m ? 'M' : chars.charAt(Math.floor(Math.random() * chars.length));
            }}, '-=200')
            .add({ targets: 'text', duration: 1, begin: function() {
                const gEl = document.getElementById('g-letter');
                const tEl = document.getElementById('t-letter');
                const mEl = document.getElementById('m-letter');
                if(gEl) gEl.textContent = 'G';
                if(tEl) tEl.textContent = 'T';
                if(mEl) mEl.textContent = 'M';
            }})
            .add({ targets: 'text', opacity: 0, translateY: [0, -10, 0, 10, 0], scale: 0.8, duration: 800, delay: anime.stagger(100), easing: 'easeInOutQuad'}, '+=500');
        }
        function animateWordle(container, url) {
            const wordleContainer = document.createElement('div');
            wordleContainer.id = 'wordle-container';
            const word = "LOADS";
            for (let i = 0; i < 5; i++) {
                const tile = document.createElement('div');
                tile.classList.add('tile');
                tile.innerHTML = `<div class="tile-content"><div class="front"></div><div class="back">${word[i]}</div></div>`;
                wordleContainer.appendChild(tile);
            }
            container.appendChild(wordleContainer);
            container.style.backgroundColor = "#008080";
            const tiles = wordleContainer.querySelectorAll('.tile');
            const flipSpeed = 250, revealPause = 400, flipDuration = 400, greenStagger = 150;
            tiles.forEach((tile, index) => setTimeout(() => { tile.querySelector('.back').classList.add('yellow'); tile.classList.add('flipped'); }, index * flipSpeed));
            const stage1Duration = (tiles.length - 1) * flipSpeed + flipDuration;
            tiles.forEach((tile, index) => {
                setTimeout(() => {
                    tile.classList.remove('flipped');
                    setTimeout(() => {
                        const backFace = tile.querySelector('.back');
                        backFace.classList.remove('yellow');
                        backFace.classList.add('green');
                        tile.classList.add('flipped');
                    }, flipDuration);
                }, stage1Duration + revealPause + (index * greenStagger));
            });
            const stage2Duration = (tiles.length - 1) * greenStagger + (flipDuration * 2);
            setTimeout(() => { window.location.href = url; }, stage1Duration + revealPause + stage2Duration);
        }
        function animate3DModel(container, url) {
            const scene = new THREE.Scene();
            const width = container.clientWidth;
            const height = container.clientHeight;
            const camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: false });
            renderer.setSize(width / 2, height / 2, false);
            renderer.domElement.style.width = '100%';
            renderer.domElement.style.height = '100%';
            container.appendChild(renderer.domElement);
            scene.add(createRetroStars());
            scene.add(new THREE.AmbientLight(0xffffff, 0.1));
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1.5);
            directionalLight.position.set(0, 0, 10);
            scene.add(directionalLight);
            const controls = new OrbitControls(camera, renderer.domElement);
            controls.enableZoom = false;
            controls.enableRotate = false;
            controls.autoRotate = true;
            controls.autoRotateSpeed = 0.5;
            const startZoom = 5, endZoom = 1.15, zoomSpeed = 0.04;
            camera.position.z = startZoom;
            let isRedirecting = false;
            const dracoLoader = new DRACOLoader();
            dracoLoader.setDecoderPath('https://unpkg.com/three@0.157.0/examples/jsm/libs/draco/');
            const loader = new GLTFLoader();
            loader.setDRACOLoader(dracoLoader);
            loader.load('my-model.glb', (gltf) => {
                const model = gltf.scene;
                scene.add(model);
                animate();
            }, undefined, (error) => {
                container.innerHTML = `<p style="color:red; font-family:'Press Start 2P';">Load Error</p>`;
            });
            function animate() {
                if (isRedirecting) return;
                if (camera.position.z > endZoom) {
                    camera.position.z -= zoomSpeed;
                } else {
                    isRedirecting = true;
                    setTimeout(() => window.location.href = url, 500 );
                    return;
                }
                controls.update();
                renderer.render(scene, camera);
                requestAnimationFrame(animate);
            }
        }
        function createRetroStars() {
            const starGeometry = new THREE.BufferGeometry();
            const starVertices = [];
            for (let i = 0; i < 1000; i++) {
                const x = (Math.random() - 0.5) * 500;
                const y = (Math.random() - 0.5) * 500;
                const z = (Math.random() - 0.5) * 500;
                starVertices.push(x, y, z);
            }
            starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
            const starMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 2, sizeAttenuation: false });
            return new THREE.Points(starGeometry, starMaterial);
        }
        function animateTerminal(container, url) {
            container.style.backgroundColor = '#000';
            container.style.fontFamily = "'Press Start 2P', cursive";
            container.style.textAlign = 'left';
            container.style.padding = '1rem';
            container.style.color = '#00FF00';
            const textEl = document.createElement('span');
            const cursorEl = document.createElement('span');
            cursorEl.className = 'cursor';
            container.appendChild(textEl);
            container.appendChild(cursorEl);
            const textToType = "> Loading module...";
            textEl.textContent = '';
            let i = 0;
            function typeWriter() {
                if (i < textToType.length) {
                    textEl.textContent += textToType.charAt(i);
                    i++;
                    setTimeout(typeWriter, 50);
                } else {
                    setTimeout(() => window.location.href = url, 500);
                }
            }
            typeWriter();
        }
        function animateCanyonDrive(container, url) {
            container.innerHTML = `<div class="canyon-road"><div class="road-line"></div><div class.car-sprite"></div></div>`;
            setTimeout(() => { window.location.href = url; }, 4000);
        }
        function animateGitHub(container, url) {
            const svgContainer = document.createElement('div');
            svgContainer.className = 'github-blueprint-container';
            svgContainer.innerHTML = `<svg viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(0, 128, 128, 0.3)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" class="grid-background" /><path class="octocat-path" d="M50,2 C23.5,2 2,23.5 2,50 C2,70 15,86.9 33.4,94.2 C35.2,94.6 36,93.4 36,92.4 C36,91.4 36,88.4 36,85.1 C22.6,87.9 20,78.8 20,78.8 C18.4,74.7 15.4,73.4 15.4,73.4 C12.2,71.2 15.6,71.2 15.6,71.2 C19.1,71.5 21.2,74.8 21.2,74.8 C24.4,80.2 29.8,78.5 32.1,77.4 C32.4,75.3 33.3,73.9 34.2,73.1 C25.2,72.1 15.8,68.7 15.8,53.8 C15.8,47.7 18,43 21.4,39.6 C21,38.5 19.5,33.4 21.8,26.8 C21.8,26.8 24.8,25.8 36,33.1 C38.8,32.3 41.9,31.9 45,31.9 C48.1,31.9 51.2,32.3 54,33.1 C65.2,25.8 68.2,26.8 68.2,26.8 C70.5,33.4 69,38.5 68.6,39.6 C72,43 74.2,47.7 74.2,53.8 C74.2,68.8 64.8,72.1 55.8,73.1 C56.9,74 58,76.2 58,79.5 C58,84.4 58,88.3 58,89.4 C58,90.4 58.8,91.6 60.6,91.2 C79,83.9 92,67 92,50 C92,23.5 76.5,2 50,2 Z" /></svg>`;
            container.appendChild(svgContainer);
            const tl = anime.timeline({ easing: 'easeInOutQuad', duration: 4000, complete: () => window.location.href = url });
            tl.add({ targets: '.grid-background', opacity: [0, 1], duration: 800 })
            .add({ targets: '.octocat-path', stroke: '#2c94e8', strokeDashoffset: [anime.setDashoffset, 0], duration: 2000 }, 0)
            .add({ targets: '.octocat-path', stroke: '#FFFFFF', duration: 800 }, '-=500')
            .add({ targets: '.octocat-path', fill: '#000000', duration: 600 }, '-=400')
            .add({ targets: '.github-blueprint-container', opacity: 0, duration: 500 }, '+=500');
        }

        document.addEventListener('DOMContentLoaded', () => {
            function updateClock() {
                const now = new Date();
                const hours = now.getHours() % 12 || 12;
                const minutes = now.getMinutes().toString().padStart(2, '0');
                const ampm = now.getHours() >= 12 ? 'PM' : 'AM';
                document.getElementById('clock').textContent = `${hours}:${minutes} ${ampm}`;
            }
            updateClock();
            setInterval(updateClock, 1000);

            const icons = document.querySelectorAll('.desktop-icon');
            let selectedIcon = null;
            let lastClickTime = 0;
            icons.forEach(icon => {
                icon.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const currentTime = new Date().getTime();
                    const isDoubleClick = currentTime - lastClickTime < 300;
                    if (selectedIcon && selectedIcon !== icon) selectedIcon.classList.remove('selected');
                    icon.classList.add('selected');
                    selectedIcon = icon;
                    if (isDoubleClick) {
                        const windowId = icon.dataset.window;
                        if (windowId) openWindow(windowId);
                    }
                    lastClickTime = currentTime;
                });
            });

            let highestZ = 200;
            const windows = document.querySelectorAll('.window');
            
            function openWindow(windowId) {
                const windowEl = document.getElementById(windowId);
                if (windowEl) {
                    windowEl.style.display = 'block';
                    bringToFront(windowEl);
                    const animationType = windowEl.dataset.animation;
                    const url = windowEl.dataset.url;
                    if(animationType) {
                        runAnimationInWindow(windowEl, animationType, url);
                    }
                }
            }

            function bringToFront(windowEl) {
                windows.forEach(w => w.classList.remove('active'));
                windowEl.classList.add('active');
                highestZ++;
                windowEl.style.zIndex = highestZ;
            }

            windows.forEach(windowEl => {
                windowEl.addEventListener('mousedown', () => bringToFront(windowEl));
                const closeBtn = windowEl.querySelector('.window-button.close');
                if(closeBtn){
                    closeBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        windowEl.style.display = 'none';
                    });
                }
            });
            let activeWindow = null;
            let offset = { x: 0, y: 0 };
            document.querySelectorAll('.window-titlebar').forEach(titlebar => {
                titlebar.addEventListener('mousedown', function(e) {
                    activeWindow = this.closest('.window');
                    bringToFront(activeWindow);
                    offset.x = e.clientX - activeWindow.offsetLeft;
                    offset.y = e.clientY - activeWindow.offsetTop;
                });
            });
            document.addEventListener('mousemove', (e) => {
                if (activeWindow) {
                    activeWindow.style.left = (e.clientX - offset.x) + 'px';
                    activeWindow.style.top = (e.clientY - offset.y) + 'px';
                }
            });
            document.addEventListener('mouseup', () => { activeWindow = null; });

            document.querySelector('.desktop').addEventListener('click', () => {
                if (selectedIcon) {
                    selectedIcon.classList.remove('selected');
                    selectedIcon = null;
                }
            });

            let isResizing = false;
            let activeResizeWindow = null;
            let currentHandle = null;
            let initialMouseX, initialMouseY, initialWidth, initialHeight, initialTop, initialLeft;
            document.querySelectorAll('.resize-handle').forEach(handle => {
                handle.addEventListener('mousedown', function(e) {
                    e.stopPropagation();
                    isResizing = true;
                    currentHandle = e.target;
                    activeResizeWindow = this.closest('.window');
                    initialMouseX = e.clientX;
                    initialMouseY = e.clientY;
                    initialWidth = activeResizeWindow.offsetWidth;
                    initialHeight = activeResizeWindow.offsetHeight;
                    initialTop = activeResizeWindow.offsetTop;
                    initialLeft = activeResizeWindow.offsetLeft;
                    document.addEventListener('mousemove', doResize);
                    document.addEventListener('mouseup', stopResize);
                });
            });

            function doResize(e) {
                if (!isResizing) return;
                const dx = e.clientX - initialMouseX;
                const dy = e.clientY - initialMouseY;
                if (currentHandle.classList.contains('right') || currentHandle.classList.contains('top-right') || currentHandle.classList.contains('bottom-right')) {
                    activeResizeWindow.style.width = (initialWidth + dx) + 'px';
                }
                if (currentHandle.classList.contains('bottom') || currentHandle.classList.contains('bottom-left') || currentHandle.classList.contains('bottom-right')) {
                    activeResizeWindow.style.height = (initialHeight + dy) + 'px';
                }
                if (currentHandle.classList.contains('left') || currentHandle.classList.contains('top-left') || currentHandle.classList.contains('bottom-left')) {
                    activeResizeWindow.style.width = (initialWidth - dx) + 'px';
                    activeResizeWindow.style.left = (initialLeft + dx) + 'px';
                }
                if (currentHandle.classList.contains('top') || currentHandle.classList.contains('top-left') || currentHandle.classList.contains('top-right')) {
                    activeResizeWindow.style.height = (initialHeight - dy) + 'px';
                    activeResizeWindow.style.top = (initialTop + dy) + 'px';
                }
            }

            function stopResize() {
                isResizing = false;
                document.removeEventListener('mousemove', doResize);
                document.addEventListener('mouseup', stopResize);
            }
        });
    </script>
</body>
</html>
